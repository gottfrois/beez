#!/usr/bin/env ruby

require "bundler/setup"
require "beez"
require "beez/server"
require "optparse"

options        = {}
version        = Beez::VERSION
debug_help     = "set $DEBUG to true"
warn_help      = "enable warnings"

op = OptionParser.new
op.banner =  "Beez worker"
op.separator ""
op.separator "Usage: server [options]"
op.separator ""

op.separator "Ruby options:"
op.on(      "--debug",        debug_help)   { $DEBUG = true }
op.on(      "--warn",         warn_help)    { $-w = true    }
op.separator ""

op.separator "Common options:"
op.on("-h", "--help")    { puts op.to_s; exit }
op.on("-v", "--version") { puts version; exit }
op.separator ""

op.parse!(ARGV)

Beez::Server.new(options).run!
